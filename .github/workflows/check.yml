name: Check
on: [push]
jobs:
    check:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - uses: oven-sh/setup-bun@v2
            - name: ğŸª´ Install dependencies
              run: bun install --frozen-lockfile
            - name: ğŸ˜ Check
              run: bun biome ci
            - name: ğŸ”¨ Build
              run: bun run build
            - name: ğŸ” Check types
              run: bun tc
    test:
        runs-on: ubuntu-latest
        strategy:
            matrix:
                example: [preact, solid, vue]
        steps:
            - uses: actions/checkout@v4
            - uses: oven-sh/setup-bun@v2
            - name: ğŸª´ Install dependencies
              run: bun install --frozen-lockfile
            - name: ğŸ”¨ Build
              run: bun run build
            - name: ğŸï¸ Install Playwright
              run: bunx playwright install --with-deps
            - name: ğŸš€ Start ${{ matrix.example }} preview
              run: bun preview --filter=${{ matrix.example }}-example &
            - name: â³ Wait for server
              run: npx wait-on http://localhost:4173 --timeout 30000
            - name: ğŸ§ª Run tests
              run: bun run test